{% extends "index_base.html" %}
{% block context %}
<div class="container-scroller">

  <!-- partial:partials/_navbar.html -->
  {% include "navbar.html" %}
  <!-- partial -->
  <div class="container-fluid page-body-wrapper">
    <!-- partial:partials/_settings-panel.html -->
    {% include "settings_panel.html" %}

    {% include "sidebar.html" %}

    <!-- partial -->
    <div class="main-panel">        
      <div class="content-wrapper">
        <div class="row">

          <div class="col-md-8 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h4 class="card-title">顧客情報</h4>
                <form name="kokyaku_update_form" action="/kokyaku_update" method="POST">

                  <input type="hidden" name="kokyaku_id" value="{{ kokyaku['kokyaku_id'] }}" required />

                  <p class="card-description">
                    基本情報
                  </p>
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group row">
                        <label class="col-sm-3 col-form-label">名前(性)</label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" name="name_m" value="{{ kokyaku['name_m'] }}" required />
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group row">
                        <label class="col-sm-3 col-form-label">名前(名)</label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" name="name_s" value="{{ kokyaku['name_s'] }}" required />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group row">
                        <label class="col-sm-3 col-form-label">名前カナ(性)</label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" name="name_mk" value="{{ kokyaku['name_mk'] }}" />
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group row">
                        <label class="col-sm-3 col-form-label">名前カナ(名)</label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" name="name_sk" value="{{ kokyaku['name_sk'] }}" />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group row">
                        <label class="col-sm-3 col-form-label">性別</label>
                        <div class="col-sm-4">
                          <div class="form-check">
                            <label class="form-check-label">
                              <input type="radio" class="form-check-input" name="membershipRadios" id="membershipRadios1" value="" checked>
                              男性
                            </label>
                          </div>
                        </div>
                        <div class="col-sm-5">
                          <div class="form-check">
                            <label class="form-check-label">
                              <input type="radio" class="form-check-input" name="membershipRadios" id="membershipRadios2" value="option2">
                              女性
                            </label>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group row">
                        <label class="col-sm-3 col-form-label">生年月日</label>
                        <div class="col-sm-9">
                          <input class="form-control" placeholder="dd/mm/yyyy" name="seinen_dt"  value=""/>
                        </div>
                        
                      </div>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group row">
                        <label class="col-sm-3 col-form-label">固定電話</label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" name="tel" value="{{ kokyaku['tel'] }}" />
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group row">
                        <label class="col-sm-3 col-form-label">携帯電話</label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" name="tel_mob" value="{{ kokyaku['tel_mob'] }}" />
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group row">
                        <label class="col-sm-3 col-form-label">メールアドレス</label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" name="email" value="{{ kokyaku['email'] }}" />
                        </div>
                      </div>
                    </div>
                    <!-- <div class="col-md-6">
                      <div class="form-group row">
                        <label class="col-sm-3 col-form-label">携帯電話</label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" />
                        </div>
                      </div>
                    </div> -->
                  </div>

                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group row">
                        <label class="col-sm-3 col-form-label">郵便番号</label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" name="yubin" value="{{ kokyaku['yubin'] }}" />
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group row">
                        <label class="col-sm-3 col-form-label">都道府県</label>
                        <div class="col-sm-9">
                          <select class="form-control">
                            <option></option>
                            <option>北海道</option>
                            <option>東京都</option>
                            <option>大阪府</option>
                            <option>愛知県</option>
                            <option>京都府</option>
                          </select>
                        </div>
                      </div>
                    </div>
                  </div>  

                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group row">
                        <label class="col-sm-3 col-form-label">市区町村</label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" name="jusho2" value="{{ kokyaku['jusho2'] }}" />
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group row">
                        <label class="col-sm-3 col-form-label">番地</label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" name="jusho3" value="{{ kokyaku['jusho3'] }}" />
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group row">
                        <label class="col-sm-3 col-form-label">部屋番号</label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" name="jusho4" value="{{ kokyaku['jusho4'] }}" />
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group row">
                        <label class="col-sm-3 col-form-label">メモ</label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" name="memo" value="{{ kokyaku['memo'] }}" />
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="template-demo text-center">
                    <button type="submit" class="btn btn-success btn-rounded btn-fw">更新</button>
                  </div>
  
                </form>
              </div>
            </div>
          </div>

          <div class="col-md-4 d-flex align-items-stretch">
            <div class="row">
              <div class="col-md-12 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title">顧客履歴登録</h4>
                    <p class="card-description">
                      基本情報
                    </p>
                    <form name="kokyaku_rireki_form" action="/kokyaku_rireki_insert" method="POST">

                      <input type="hidden" name="kokyaku_id" value="{{ kokyaku['kokyaku_id'] }}" required />

                      <div class="row">
                        <div class="col-m-6">
                          <div class="form-group row">
                            <label class="col-sm-3 col-form-label">来店日</label>
                            <div class="col-sm-9">
                              <input class="form-control" placeholder="dd/mm/yyyy" name="start_dt"/>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-m-6">
                          <div class="form-group row">
                            <label class="col-sm-3 col-form-label">終了日</label>
                            <div class="col-sm-9">
                              <input class="form-control" placeholder="dd/mm/yyyy" name="end_dt"/>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-12">
                          <div class="form-group row">
                            <label class="col-sm-3 col-form-label">メニュー</label>
                            <div class="col-sm-9">
                              <select class="form-control" name="menu_id">
                                <option value="0"></option>
                                <option value="1">のんびりプラン</option>
                                <option value="2">わくわくプラン</option>
                                <option value="3">最強プラン</option>
                                <option value="4">ドキドキプラン</option>
                                <option value="5">ゴージャスプラン</option>
                              </select>
                            </div>
                          </div>
                        </div>
                      </div>
                      

                      <div class="row">
                        <div class="col-md-12">
                          <div class="form-group row">
                            <label class="col-sm-3 col-form-label">ご利用人数</label>
                            <div class="col-sm-9">
                              <input type="text" class="form-control" name="ninzu"/>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="template-demo text-center">
                        <button type="button" class="btn btn-warning btn-rounded btn-fw">新規登録</button>
                      </div>

                    </form>

                  </div>
                </div>
              </div>
              <div class="col-md-12 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body cente">
                    <h4 class="card-title">顧客情報一覧 <label class="badge badge-danger">{{ sum_cnt }}</label></h4>
                    

                    <p class="card-description">
                      Add class <code>.table-hover</code>
                    </p>
                    <div class="table-responsive">
                      <table class="table table-hover">
                        <thead>
                          <tr>
                            <th>来店日</th>
                            <th>メニュー</th>
                            <th>金額</th>
                          </tr>
                        </thead>
                        <tbody>
                          {% for rireki in kokyakuRireki %}
                          <tr>
                            <td>{{ rireki['start_dt'] }}</td>
                            <td>{{ rireki['menu_nm'] }}</td>
                            <td> {{ rireki['menu_kg'] }}円</td>
                          </tr>
                          {% endfor %}
                          
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-md-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h4 class="card-title">年別来店回数</h4>
                <canvas id="barChart"></canvas>
              </div>
            </div>
          </div>

          <div class="col-md-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h4 class="card-title">月別来店回数</h4>
                <canvas id="lineChart"></canvas>
              </div>
            </div>
          </div>

        </div>
      </div>
      <!-- content-wrapper ends -->
      <!-- partial:../../partials/_footer.html -->
      {% include "footer.html" %}
      <!-- partial -->
    </div>
    <!-- main-panel ends -->
  </div>
  <!-- page-body-wrapper ends -->
</div>
<!-- container-scroller -->
<!-- plugins:js -->
<script src="{{ url_for('static',filename='vendors/chart.js/Chart.min.js') }}"></script>
<script src="{{ url_for('static',filename='vendors/js/vendor.bundle.base.js') }}"></script>
<!-- endinject -->
<!-- Plugin js for this page -->
<script src="{{ url_for('static',filename='vendors/typeahead.js/typeahead.bundle.min.js') }}"></script>
<script src="{{ url_for('static',filename='vendors/select2/select2.min.js') }}"></script>
<script src="{{ url_for('static',filename='vendors/bootstrap-datepicker/bootstrap-datepicker.min.js') }}"></script>
<!-- End plugin js for this page -->
<!-- inject:js -->
<script src="{{ url_for('static',filename='js/off-canvas.js') }}"></script>
<script src="{{ url_for('static',filename='js/hoverable-collapse.js') }}"></script>
<script src="{{ url_for('static',filename='js/template.js') }}"></script>
<script src="{{ url_for('static',filename='js/settings.js') }}"></script>
<script src="{{ url_for('static',filename='js/todolist.js') }}"></script>
<!-- endinject -->
<!-- Custom js for this page-->
<script src="{{ url_for('static',filename='js/file-upload.js') }}"></script>
<script src="{{ url_for('static',filename='js/typeahead.js') }}"></script>
<script src="{{ url_for('static',filename='js/select2.js') }}"></script>
<script src="{{ url_for('static',filename='js/chart.js') }}"></script>
<!-- End custom js for this page-->
{% endblock %}

